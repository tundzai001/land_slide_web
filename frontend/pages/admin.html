<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Landslide Monitor</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/theme-variables.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body>

<style>
/* ============================================
   SENSOR CONFIG SECTIONS - Smooth Slide Down
============================================ */
.sensor-config-section {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    margin-bottom: 16px;
    overflow: hidden;
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        max-height: 500px;
        transform: translateY(0);
    }
}

.sensor-config-header {
    background: rgba(14, 165, 233, 0.08);
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-color);
}

.sensor-config-header i {
    font-size: 1.2rem;
}

.sensor-config-body {
    padding: 16px;
}

/* Coordinate Lock Box */
.coordinate-lock-box {
    background: rgba(245, 158, 11, 0.08);
    border: 1px solid rgba(245, 158, 11, 0.3);
    border-radius: 8px;
    padding: 16px;
    margin-top: 16px;
}

.coordinate-lock-box h6 {
    color: var(--accent-warning);
    font-weight: 700;
}

/* Wizard - Adjust for 3 steps */
.wizard-steps {
    display: flex;
    justify-content: space-between;
    margin-bottom: 32px;
    position: relative;
}

.wizard-steps::before {
    content: '';
    position: absolute;
    top: 20px;
    left: 10%;
    right: 10%;
    height: 2px;
    background: var(--border-color);
    z-index: 0;
}

/* Button Gradient */
.btn-gradient {
    background: var(--gradient-button);
    border: none;
    color: white;
    font-weight: 600;
    transition: all 0.3s;
}

.btn-gradient:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(14, 165, 233, 0.4);
    color: white;
}
</style>

    <!-- Sidebar -->
    <div class="admin-sidebar">
        <div class="sidebar-brand">
            <h4><i class="bi bi-shield-lock-fill me-2"></i>Admin Panel</h4>
            <small class="text-muted">Landslide Monitor</small>
        </div>

        <div class="sidebar-actions px-3 mb-4">
            <button class="btn btn-gradient w-100" onclick="window.adminManager.openAddStationModal()">
                <i class="bi bi-plus-circle-fill me-2"></i>Th√™m Tr·∫°m M·ªõi
            </button>
        </div>

        <nav>
            <div class="nav-item">
                <a class="nav-link" href="/pages/map.html">
                    <i class="bi bi-map"></i>
                    <span>B·∫£n ƒë·ªì</span>
                </a>
            </div>
            <div class="nav-item">
                <a class="nav-link active" href="/pages/admin.html">
                    <i class="bi bi-gear-fill"></i>
                    <span>Qu·∫£n l√Ω H·ªá th·ªëng</span>
                </a>
            </div>
            <div class="nav-item mt-5">
                <a class="nav-link text-danger" href="#" id="logout-btn">
                    <i class="bi bi-box-arrow-left"></i>
                    <span>ƒêƒÉng xu·∫•t</span>
                </a>
            </div>
        </nav>
    </div>

    <!-- Top Navbar -->
    <nav class="admin-navbar">
        <div class="d-flex justify-content-between align-items-center w-100">
            <div class="navbar-left">
                <span class="text-muted small">Current Session:</span>
                <span class="fw-bold ms-2" id="current-time" style="color: var(--accent-primary);">--:--</span>
            </div>
            <div class="navbar-right d-flex align-items-center gap-3">
                <div class="theme-toggle-mini" id="theme-toggle" onclick="window.themeManager.toggle()">
                    <i class="bi bi-moon-stars-fill"></i>
                </div>
                <div class="user-profile d-flex align-items-center gap-2">
                    <div class="avatar-circle">A</div>
                    <span class="d-none d-sm-block">Administrator</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="admin-main">
        <div class="page-header">
            <h1 class="page-title">
                <i class="bi bi-gear-wide-connected me-2"></i>
                Qu·∫£n l√Ω H·ªá th·ªëng
            </h1>
            <p class="text-muted">Qu·∫£n l√Ω ng∆∞·ªùi d√πng v√† thi·∫øt b·ªã</p>
        </div>

        <!-- Main Tabs -->
        <ul class="nav nav-tabs main-tabs" id="mainTabs" role="tablist">
            <li class="nav-item">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-users">
                    <i class="bi bi-people me-2"></i>Qu·∫£n l√Ω Ng∆∞·ªùi d√πng
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-devices">
                    <i class="bi bi-hdd-network me-2"></i>Qu·∫£n l√Ω Thi·∫øt b·ªã
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            
            <!-- TAB 1: USERS -->
            <div class="tab-pane fade show active" id="tab-users">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4>Danh s√°ch Ng∆∞·ªùi d√πng</h4>
                    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
                        <i class="bi bi-person-plus me-2"></i>Th√™m user
                    </button>
                </div>

                <div class="custom-table">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>T√†i kho·∫£n</th>
                                <th>H·ªç t√™n</th>
                                <th>Vai tr√≤</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="user-table-body">
                            <tr>
                                <td colspan="6" class="text-center py-4">
                                    <div class="spinner-border text-primary"></div>
                                    <p class="mt-2 text-muted">ƒêang t·∫£i...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- TAB 2: DEVICES -->
            <div class="tab-pane fade" id="tab-devices">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4>Danh s√°ch Tr·∫°m</h4>
                    <button class="btn btn-gradient" onclick="window.adminManager.openAddStationModal()">
                        <i class="bi bi-plus-circle me-2"></i>Th√™m tr·∫°m
                    </button>
                </div>

                <div id="station-list" class="row">
                    <div class="text-center mt-5">
                        <div class="spinner-border text-primary"></div>
                        <p class="text-muted mt-2">ƒêang t·∫£i...</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal fade" id="addUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Th√™m ng∆∞·ªùi d√πng m·ªõi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addUserForm">
                        <div class="mb-3">
                            <label class="form-label">T√†i kho·∫£n</label>
                            <input type="text" class="form-control" id="new-username" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">M·∫≠t kh·∫©u</label>
                            <input type="password" class="form-control" id="new-password" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">H·ªç t√™n</label>
                            <input type="text" class="form-control" id="new-fullname">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Vai tr√≤</label>
                            <select class="form-select" id="new-role">
                                <option value="viewer">Viewer</option>
                                <option value="operator">Operator</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-gradient" onclick="window.adminManager.createUser()">T·∫°o t√†i kho·∫£n</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚úÖ Station Config Modal - 3 STEPS ONLY -->
    <div class="modal fade" id="stationConfigModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-title">C·∫•u h√¨nh Tr·∫°m</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Wizard Steps - 3 STEPS -->
                    <div class="wizard-steps" id="wizard-steps">
                        <div class="wizard-step active" data-step="1">
                            <div class="step-circle">1</div>
                            <div class="step-label">Th√¥ng tin c∆° b·∫£n</div>
                        </div>
                        <div class="wizard-step" data-step="2">
                            <div class="step-circle">2</div>
                            <div class="step-label">MQTT & T·ªça ƒë·ªô</div>
                        </div>
                        <div class="wizard-step" data-step="3">
                            <div class="step-circle">3</div>
                            <div class="step-label">Ng∆∞·ª°ng c·∫£nh b√°o</div>
                        </div>
                    </div>

                    <form id="stationConfigForm">
                        <input type="hidden" id="edit-station-id">
                        
                        <!-- ============ STEP 1: M√É TR·∫†M & T√äN ============ -->
                        <div class="wizard-content active" data-step="1">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">M√£ tr·∫°m <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="edit-code" required>
                                    <small class="text-muted">VD: ST01, ST02...</small>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">T√™n tr·∫°m <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="edit-name" required>
                                    <small class="text-muted">VD: Tr·∫°m ƒê√† N·∫µng</small>
                                </div>
                            </div>
                        </div>

                        <!-- ============ STEP 2: MQTT & T·ªåA ƒê·ªò ============ -->
                        <div class="wizard-content" data-step="2">
                            <div class="alert alert-info small mb-3">
                                <i class="bi bi-info-circle me-1"></i>
                                Ch·ªçn thi·∫øt b·ªã ‚Üí Nh·∫≠p MQTT Topic ‚Üí C·∫•u h√¨nh t·ªça ƒë·ªô (n·∫øu c·∫ßn)
                            </div>

                            <!-- Sensor Selection -->
                            <h6 class="mb-3">1. Ch·ªçn thi·∫øt b·ªã c·∫ßn k√≠ch ho·∫°t:</h6>
                            <div class="d-flex flex-wrap gap-3 mb-4 p-3 border rounded">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="edit-gnss">
                                    <label class="form-check-label">
                                        <i class="bi bi-geo-alt-fill text-danger me-1"></i> GNSS
                                    </label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="edit-rain">
                                    <label class="form-check-label">
                                        <i class="bi bi-cloud-rain-fill me-1" style="color: var(--accent-primary);"></i> Rain
                                    </label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="edit-water">
                                    <label class="form-check-label">
                                        <i class="bi bi-water me-1" style="color: var(--accent-info);"></i> Water
                                    </label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="edit-imu">
                                    <label class="form-check-label">
                                        <i class="bi bi-compass-fill me-1" style="color: var(--accent-warning);"></i> IMU
                                    </label>
                                </div>
                            </div>

                            <h6 class="mb-3">2. C·∫•u h√¨nh MQTT Topics:</h6>

                            <!-- GNSS Section -->
                            <div id="mqtt-gnss-section" class="sensor-config-section" style="display: none;">
                                <div class="sensor-config-header">
                                    <i class="bi bi-geo-alt-fill text-danger"></i>
                                    <span>GNSS Configuration</span>
                                </div>
                                <div class="sensor-config-body">
                                    <label class="form-label">MQTT Topic</label>
                                    <input type="text" class="form-control mb-3" id="topic-gnss" placeholder="station/ST01/gnss">
                                    
                                    <div class="coordinate-lock-box">
                                        <h6 class="mb-2">
                                            <i class="bi bi-crosshair me-2"></i>Kh√≥a T·ªça ƒë·ªô G·ªëc (Origin)
                                        </h6>
                                        <div class="alert alert-info small mb-3">
                                            <i class="bi bi-info-circle me-1"></i>
                                            <strong>C√°ch l·∫•y t·ªça ƒë·ªô:</strong><br>
                                            1. Nh·∫≠p MQTT Topic b√™n tr√™n<br>
                                            2. Click "L·∫•y t·ªça ƒë·ªô hi·ªán t·∫°i"<br>
                                            3. H·ªá th·ªëng s·∫Ω <strong>subscribe v√†o topic</strong> v√† ƒë·ª£i d·ªØ li·ªáu GNSS<br>
                                            4. T·ªça ƒë·ªô s·∫Ω t·ª± ƒë·ªông ƒëi·ªÅn v√†o form (timeout: 30s)
                                        </div>
                                        <div class="row g-2 mb-3">
                                            <div class="col-md-4">
                                                <label class="form-label small">Latitude</label>
                                                <input type="number" step="0.00000001" class="form-control form-control-sm" id="origin-lat" readonly>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Longitude</label>
                                                <input type="number" step="0.00000001" class="form-control form-control-sm" id="origin-lon" readonly>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Height (m)</label>
                                                <input type="number" step="0.001" class="form-control form-control-sm" id="origin-h" readonly>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small id="origin-status" class="text-muted">Ch∆∞a c√≥ d·ªØ li·ªáu g·ªëc</small>
                                            <button type="button" class="btn btn-sm btn-warning" id="btn-fetch-origin" onclick="window.adminManager.fetchLatestOrigin()">
                                                <i class="bi bi-arrow-repeat me-1"></i> L·∫•y t·ªça ƒë·ªô hi·ªán t·∫°i
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- RAIN Section -->
                            <div id="mqtt-rain-section" class="sensor-config-section" style="display: none;">
                                <div class="sensor-config-header">
                                    <i class="bi bi-cloud-rain-fill" style="color: var(--accent-primary);"></i>
                                    <span>Rain Configuration</span>
                                </div>
                                <div class="sensor-config-body">
                                    <label class="form-label">MQTT Topic</label>
                                    <input type="text" class="form-control" id="topic-rain" placeholder="station/ST01/rain">
                                </div>
                            </div>

                            <!-- WATER Section -->
                            <div id="mqtt-water-section" class="sensor-config-section" style="display: none;">
                                <div class="sensor-config-header">
                                    <i class="bi bi-water" style="color: var(--accent-info);"></i>
                                    <span>Water Level Configuration</span>
                                </div>
                                <div class="sensor-config-body">
                                    <label class="form-label">MQTT Topic</label>
                                    <input type="text" class="form-control" id="topic-water" placeholder="station/ST01/water">
                                </div>
                            </div>

                            <!-- IMU Section -->
                            <div id="mqtt-imu-section" class="sensor-config-section" style="display: none;">
                                <div class="sensor-config-header">
                                    <i class="bi bi-compass-fill" style="color: var(--accent-warning);"></i>
                                    <span>IMU Configuration</span>
                                </div>
                                <div class="sensor-config-body">
                                    <label class="form-label">MQTT Topic</label>
                                    <input type="text" class="form-control" id="topic-imu" placeholder="station/ST01/imu">
                                </div>
                            </div>

                            <div id="mqtt-empty-state" class="text-center py-5 text-muted">
                                <i class="bi bi-inbox fs-1"></i>
                                <p class="mt-2">Ch∆∞a c√≥ thi·∫øt b·ªã n√†o ƒë∆∞·ª£c ch·ªçn</p>
                            </div>
                        </div>

                        <!-- ============ STEP 3: NG∆Ø·ª†NG ============ -->
                        <div class="wizard-content" data-step="3">
                            <div class="alert alert-warning small mb-4">
                                <i class="bi bi-exclamation-triangle me-1"></i>
                                C√°c ng∆∞·ª°ng n√†y quy·∫øt ƒë·ªãnh m·ª©c ƒë·ªô c·∫£nh b√°o.
                            </div>

                            <!-- 1. C·∫•u h√¨nh Water / Displacement Thresholds -->
                            <h6 class="mb-2 text-primary"><i class="bi bi-water me-2"></i>Water & Displacement Thresholds</h6>
                            <div class="row g-3 mb-4 p-3 border rounded bg-light">
                                <div class="col-md-6">
                                    <label class="form-label">‚ö†Ô∏è Warning (m)</label>
                                    <input type="number" step="0.01" class="form-control" id="cfg-water-warning" value="0.15">
                                    <small class="text-muted">Ng∆∞·ª°ng c·∫£nh b√°o c·∫•p 1</small>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">üö® Critical (m)</label>
                                    <input type="number" step="0.01" class="form-control" id="cfg-water-critical" value="0.30">
                                    <small class="text-muted">Ng∆∞·ª°ng c·∫£nh b√°o c·∫•p 2</small>
                                </div>
                            </div>

                            <!-- 2. C·∫•u h√¨nh Rain -->
                            <h6 class="mb-2 text-info"><i class="bi bi-cloud-rain me-2"></i>Rain Alerting (mm/h)</h6>
                            <div class="row g-3 mb-4 p-3 border rounded bg-light">
                                <div class="col-md-4">
                                    <label class="form-label">üëÅÔ∏è Watch</label>
                                    <input type="number" class="form-control" id="cfg-rain-watch" value="10.0">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">‚ö†Ô∏è Warning</label>
                                    <input type="number" class="form-control" id="cfg-rain-warning" value="25.0">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">üö® Critical</label>
                                    <input type="number" class="form-control" id="cfg-rain-critical" value="50.0">
                                </div>
                            </div>

                            <!-- 3. C·∫•u h√¨nh GNSS Quality & Velocity -->
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h6 class="text-danger mb-0"><i class="bi bi-geo-alt me-2"></i>GNSS Quality Control</h6>
                                <button type="button" class="btn btn-sm btn-outline-danger" onclick="window.adminManager.openVelocityModal()">
                                    <i class="bi bi-speedometer2 me-1"></i> B·∫£ng ph√¢n c·∫•p v·∫≠n t·ªëc
                                </button>
                            </div>
                            
                            <div class="row g-3 mb-4 p-3 border rounded bg-light">
                                <!-- C√°c input HDOP c≈© gi·ªØ nguy√™n -->
                                <div class="col-md-6">
                                    <label class="form-label">Max HDOP</label>
                                    <input type="number" step="0.1" class="form-control" id="cfg-gnss-hdop">
                                    <small class="text-muted">Ch·ªâ s·ªë pha lo√£ng ƒë·ªô ch√≠nh x√°c t·ªëi ƒëa</small>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Confirm Steps</label>
                                    <input type="number" class="form-control" id="cfg-gnss-steps">
                                    <small class="text-muted">S·ªë l·∫ßn l·∫∑p ƒë·ªÉ x√°c nh·∫≠n</small>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Safe Streak</label>
                                    <input type="number" class="form-control" id="cfg-gnss-streak">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Degraded Timeout (s)</label>
                                    <input type="number" class="form-control" id="cfg-gnss-timeout">
                                </div>
                            </div>

                            <!-- 4. C·∫•u h√¨nh IMU -->
                            <h6 class="mb-2 text-warning"><i class="bi bi-activity me-2"></i>IMU Alerting</h6>
                            <div class="row g-3 p-3 border rounded bg-light">
                                <div class="col-md-6">
                                    <label class="form-label">üí• Shock Threshold (m/s¬≤)</label>
                                    <input type="number" step="0.1" class="form-control" id="cfg-imu-shock" value="5.0">
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-outline-danger" onclick="window.adminManager.deleteStation()" id="btn-delete-station" style="display: none;">
                        <i class="bi bi-trash"></i> X√≥a tr·∫°m
                    </button>
                    <div class="d-flex gap-2">
                        <button type="button" class="btn btn-secondary" id="btn-wizard-back" style="display: none;">
                            <i class="bi bi-arrow-left me-1"></i> Quay l·∫°i
                        </button>
                        <button type="button" class="btn btn-primary" id="btn-wizard-next">
                            Ti·∫øp theo <i class="bi bi-arrow-right ms-1"></i>
                        </button>
                        <button type="button" class="btn btn-success" id="btn-wizard-save" style="display: none;" onclick="window.adminManager.saveStation()">
                            <i class="bi bi-save me-1"></i> L∆∞u c·∫•u h√¨nh
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal C·∫•u h√¨nh B·∫£ng Cruden & Varnes -->
    <div class="modal fade" id="velocityConfigModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title"><i class="bi bi-speedometer2 me-2"></i>Ph√¢n c·∫•p V·∫≠n t·ªëc (Cruden & Varnes)</h5>
                    <button type="button" class="btn-close btn-close-white" onclick="window.adminManager.closeVelocityModal()"></button>
                </div>
                <div class="modal-body p-0">
                    <div class="alert alert-light m-3 border">
                        <small class="text-muted">
                            <i class="bi bi-info-circle-fill me-1"></i>
                            H·ªá th·ªëng s·∫Ω so s√°nh v·∫≠n t·ªëc tr∆∞·ª£t hi·ªán t·∫°i v·ªõi b·∫£ng n√†y ƒë·ªÉ ƒë∆∞a ra ƒë√°nh gi√° (V√≠ d·ª•: "Very Rapid", "Slow"...).
                            S·∫Øp x·∫øp theo th·ª© t·ª± gi·∫£m d·∫ßn.
                        </small>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover mb-0 align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th style="width: 25%">C·∫•p ƒë·ªô (Name)</th>
                                    <th style="width: 25%">Ng∆∞·ª°ng (mm/s)</th>
                                    <th>M√¥ t·∫£ / Ghi ch√∫</th>
                                </tr>
                            </thead>
                            <tbody id="velocity-table-body">
                                <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c JS render v√†o ƒë√¢y -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="window.adminManager.closeVelocityModal()">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="window.adminManager.applyVelocityConfig()">
                        <i class="bi bi-check-lg me-1"></i> √Åp d·ª•ng
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/theme-manager.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/toast-notifications.js"></script>
    <script src="/js/admin-manager.js"></script>
    
    <script>
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').innerText = 
                now.toLocaleTimeString('vi-VN', {hour: '2-digit', minute:'2-digit'});
        }
        setInterval(updateTime, 1000);
        updateTime();

        window.addEventListener('themeChanged', (e) => {
            const icon = document.querySelector('#theme-toggle i');
            if (icon) {
                icon.className = e.detail.theme === 'light' ? 'bi bi-moon-stars-fill' : 'bi bi-sun-fill';
            }
        });
    </script>
</body>
</html>